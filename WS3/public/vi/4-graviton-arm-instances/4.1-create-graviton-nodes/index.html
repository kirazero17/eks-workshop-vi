<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.122.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Tạo Graviton Nodes :: Kubernetes - EKS Workshop</title>

    
    <link href="/css/nucleus.css?1712388775" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1712388775" rel="stylesheet">
    <link href="/css/hybrid.css?1712388775" rel="stylesheet">
    <link href="/css/featherlight.min.css?1712388775" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1712388775" rel="stylesheet">
    <link href="/css/auto-complete.css?1712388775" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1712388775" rel="stylesheet">
    <link href="/css/theme.css?1712388775" rel="stylesheet">
    <link href="/css/hugo-theme.css?1712388775" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1712388775" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1712388775"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1712388775"></script>
<script type="text/javascript" src="/js/auto-complete.js?1712388775"></script>
<script type="text/javascript">
    
        var baseurl = "\/vi";
    
</script>
<script type="text/javascript" src="/js/search.js?1712388775"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduce/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/">
          <b> 1. </b>Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.1-manual-scheduling/" title="Manual Scheduling" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.1-manual-scheduling/">
          <b> 1.1 </b>Manual Scheduling
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.2-labels-and-selectors/" title="Labels and Selectors" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.2-labels-and-selectors/">
          <b> 1.2 </b>Labels and Selectors
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.3-node-selectors/" title="Node Selectors" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.3-node-selectors/">
          <b>  1.3 </b>Node Selectors
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.4-taints-and-tolerations/" title="Taints and Tolerations" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.4-taints-and-tolerations/">
          <b>  1.4 </b>Taints and Tolerations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.5-node-affinity/" title="Node Affinity" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.5-node-affinity/">
          <b>  1.5 </b>Node Affinity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.6-resource-limits/" title="Giới Hạn Tài Nguyên" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.6-resource-limits/">
          <b>  1.6 </b>Giới Hạn Tài Nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.7-daemonsets/" title="DaemonSets" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.7-daemonsets/">
          <b>  1.7 </b>DaemonSets
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.8-static-pods/" title="Static Pods" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.8-static-pods/">
          <b>  1.8 </b>Static Pods
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.9-multiple-schedulers/" title="Multiple Schedulers" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.9-multiple-schedulers/">
          <b>  1.9 </b>Multiple Schedulers
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-prerequiste/" title="Các Bước Chuẩn Bị" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/">
          <b> 2. </b>Các Bước Chuẩn Bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/" title="Amazon EKS Managed Node Groups" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/">
          <b> 3. </b>Amazon EKS Managed Node Groups
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.1-add-nodes/" title="Thêm các node" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.1-add-nodes/">
          <b> 3.1 </b>Thêm các node
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.2-pod-affinity-and-anti-affinity/" title="Pod Affinity and Anti-Affinity" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.2-pod-affinity-and-anti-affinity/">
          <b> 3.2 </b>Pod Affinity and Anti-Affinity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.3-upgrading-amis/" title="Nâng cấp AMI" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.3-upgrading-amis/">
          <b> 3.3 </b>Nâng cấp AMI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/" title="Graviton (ARM) instances" class="dd-item 
        parent
        
        
        ">
      <a href="/vi/4-graviton-arm-instances/">
          <b> 4. </b>Graviton (ARM) instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/" title="Tạo Graviton Nodes" class="dd-item 
        
        active
        
        ">
      <a href="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/">
          <b> 4.1 </b>Tạo Graviton Nodes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/4.2-run-pods-on-graviton/" title="Chạy các pods trên Graviton" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-graviton-arm-instances/4.2-run-pods-on-graviton/">
          <b> 4.2 </b>Chạy các pods trên Graviton
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-spot-instances/" title="Spot instances" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/">
          <b> 5. </b>Spot instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.1-instance-type-diversification/" title="Đa dạng hóa loại Instance" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/5.1-instance-type-diversification/">
          <b> 5.1 </b>Đa dạng hóa loại Instance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.2-create-spot-capacity/" title="Tạo dung lượng dạng Spot" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/5.2-create-spot-capacity/">
          <b> 5.2 </b>Tạo dung lượng dạng Spot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.3-running-a-workload-on-spot/" title="Chạy một workloads trên Spot" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/5.3-running-a-workload-on-spot/">
          <b> 5.3 </b>Chạy một workloads trên Spot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-fargate/" title="Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/">
          <b> 6. </b>Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.1-enabling-fargate/" title="Bật Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.1-enabling-fargate/">
          <b> 6.1 </b>Bật Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.2-scheduling-on-fargate/" title="Scheduling on Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.2-scheduling-on-fargate/">
          <b> 6.2 </b>Scheduling on Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.3-resource-allocation/" title="Resource allocation" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.3-resource-allocation/">
          <b> 6.3 </b>Resource allocation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.4-scaling-the-workload/" title="Scaling the workload" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.4-scaling-the-workload/">
          <b> 6.4 </b>Scaling the workload
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=11626245&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>26-02-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
            <i> <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/vi/'>Kubernetes trên AWS</a> > <a href='/vi/4-graviton-arm-instances/'>Graviton (ARM) instances</a> > Tạo Graviton Nodes
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Tạo Graviton Nodes
            </h1>
          

        



	<h4 id="tạo-graviton-nodes">Tạo Graviton Nodes</h4>
<p>Trong bài tập này, chúng ta sẽ tạo một Amazon EKS Managed Node Groups riêng biệt với các instance dựa trên Graviton và áp dụng một taint cho nó.</p>
<p>Đầu tiên, hãy xác nhận trạng thái hiện tại của các node có sẵn trong cụm của chúng ta:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get nodes -L kubernetes.io/arch
</span></span><span style="display:flex;"><span>NAME                                           STATUS   ROLES    AGE     VERSION                ARCH
</span></span><span style="display:flex;"><span>ip-192-168-102-2.us-west-2.compute.internal    Ready    &lt;none&gt;   6h56m   vVAR::KUBERNETES_NODE_VERSION    amd64
</span></span><span style="display:flex;"><span>ip-192-168-137-20.us-west-2.compute.internal   Ready    &lt;none&gt;   6h56m   vVAR::KUBERNETES_NODE_VERSION    amd64
</span></span><span style="display:flex;"><span>ip-192-168-19-31.us-west-2.compute.internal    Ready    &lt;none&gt;   6h56m   vVAR::KUBERNETES_NODE_VERSION    amd64
</span></span></code></pre></div><p>Đầu ra cho thấy các node hiện có của chúng tôi với các cột hiển thị kiến trúc CPU của mỗi node. Tất cả các node này hiện đang sử dụng các node <code>amd64</code>.</p>
<p>Chúng ta chưa cấu hình các taints, điều này sẽ được thực hiện sau.</p>
<p>Lệnh sau tạo Node Groups Graviton:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ aws eks create-nodegroup <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cluster-name $EKS_CLUSTER_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --nodegroup-name graviton <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --node-role $GRAVITON_NODE_ROLE <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --subnets $PRIMARY_SUBNET_1 $PRIMARY_SUBNET_2 $PRIMARY_SUBNET_3 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --instance-types t4g.medium <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --ami-type AL2_ARM_64 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --scaling-config minSize<span style="color:#f92672">=</span>1,maxSize<span style="color:#f92672">=</span>3,desiredSize<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --disk-size <span style="color:#ae81ff">20</span>
</span></span></code></pre></div><p>Lệnh aws <code>eks wait nodegroup-active</code> có thể được sử dụng để chờ đợi cho đến khi một Node Groups EKS cụ thể đã hoạt động và sẵn sàng sử dụng. Lệnh này là một phần của AWS CLI và có thể được sử dụng để đảm bảo rằng Node Groups được chỉ định đã được tạo thành công và tất cả các instance liên quan đang chạy và sẵn sàng.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ aws eks wait nodegroup-active <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cluster-name $EKS_CLUSTER_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --nodegroup-name graviton
</span></span></code></pre></div><p>Khi Amazon EKS Managed Node Groups mới của chúng ta <strong>Active</strong>, chạy lệnh sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get nodes <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --label-columns eks.amazonaws.com/nodegroup,kubernetes.io/arch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                                          STATUS   ROLES    AGE    VERSION               NODEGROUP   ARCH
</span></span><span style="display:flex;"><span>ip-192-168-102-2.us-west-2.compute.internal   Ready    &lt;none&gt;   6h56m  vVAR::KUBERNETES_NODE_VERSION   default     amd64
</span></span><span style="display:flex;"><span>ip-192-168-137-20.us-west-2.compute.internal  Ready    &lt;none&gt;   6h56m  vVAR::KUBERNETES_NODE_VERSION   default     amd64
</span></span><span style="display:flex;"><span>ip-192-168-19-31.us-west-2.compute.internal   Ready    &lt;none&gt;   6h56m  vVAR::KUBERNETES_NODE_VERSION   default     amd64
</span></span><span style="display:flex;"><span>ip-10-42-172-231.us-west-2.compute.internal   Ready    &lt;none&gt;   2m5s   vVAR::KUBERNETES_NODE_VERSION   graviton    arm64
</span></span></code></pre></div><p>Lệnh trên sử dụng cờ <code>--selector</code> để truy vấn tất cả các node có labels <code>eks.amazonaws.com/nodegroup</code> khớp với tên của Amazon EKS Managed Node Groups của chúng ta <code>graviton</code>. Cờ <code>--label-columns</code> cũng cho phép chúng ta hiển thị giá trị của labels <code>eks.amazonaws.com/nodegroup</code> cũng như kiến trúc bộ xử lý trong đầu ra. Lưu ý rằng cột <code>ARCH</code> hiển thị Node Groups đã bị taint chạy Graviton <code>arm64</code>.</p>
<p>Hãy khám phá cấu hình hiện tại của node của chúng ta. Lệnh sau sẽ liệt kê chi tiết của tất cả các node thuộc Amazon EKS Managed Node Groups của chúng tôi.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl describe nodes <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --selector eks.amazonaws.com/nodegroup<span style="color:#f92672">=</span>graviton
</span></span><span style="display:flex;"><span>Name:               ip-10-42-12-233.us-west-2.compute.internal
</span></span><span style="display:flex;"><span>Roles:              &lt;none&gt;
</span></span><span style="display:flex;"><span>Labels:             beta.kubernetes.io/instance-type<span style="color:#f92672">=</span>t4g.medium
</span></span><span style="display:flex;"><span>                    beta.kubernetes.io/os<span style="color:#f92672">=</span>linux
</span></span><span style="display:flex;"><span>                    eks.amazonaws.com/capacityType<span style="color:#f92672">=</span>ON_DEMAND
</span></span><span style="display:flex;"><span>                    eks.amazonaws.com/nodegroup<span style="color:#f92672">=</span>graviton
</span></span><span style="display:flex;"><span>                    eks.amazonaws.com/nodegroup-image<span style="color:#f92672">=</span>ami-0b55230f107a87100
</span></span><span style="display:flex;"><span>                    eks.amazonaws.com/sourceLaunchTemplateId<span style="color:#f92672">=</span>lt-07afc97c4940b6622
</span></span><span style="display:flex;"><span>                    kubernetes.io/arch<span style="color:#f92672">=</span>arm64
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>CreationTimestamp:  Wed, <span style="color:#ae81ff">09</span> Nov <span style="color:#ae81ff">2022</span> 10:36:26 +0000
</span></span><span style="display:flex;"><span>Taints:             &lt;none&gt;
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>...<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Một số điểm cần chú ý:</p>
<ol>
<li>EKS tự động thêm một số labels nhất định để cho phép việc lọc dễ dàng hơn, bao gồm các labels cho loại hệ điều hành, tên Amazon EKS Managed Node Groups và các loại khác. Trong khi một số labels được cung cấp sẵn với EKS, AWS cho phép các nhà điều hành cấu hình bộ labels tùy chỉnh của riêng họ tại mức độ Amazon EKS Managed Node Groups. Điều này đảm bảo rằng mỗi node trong một Node Groups sẽ có các labels nhất quán. Nhãn <code>kubernetes.io/arch</code> cho thấy chúng ta đang chạy một instance EC2 với kiến trúc CPU ARM64.</li>
<li>Hiện tại không có taint được cấu hình cho node đã khám phá, như được thể hiện bởi phần <code>Taints: &lt;none&gt;</code>.</li>
</ol>
<h4 id="cấu-hình-taint-cho-amazon-eks-managed-node-groups">Cấu hình taint cho Amazon EKS Managed Node Groups</h4>
<p>Trong khi dễ dàng thêm taint cho các node bằng cách sử dụng CLI <code>kubectl</code> như mô tả <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/#concepts">tại đây</a>, một quản trị viên sẽ phải thực hiện thay đổi này mỗi khi Node Groups dưới cơ bắt đầu hoặc kết thúc. Để vượt qua thách thức này, AWS hỗ trợ thêm cả <code>labels</code> và <code>taints</code> vào các Amazon EKS Managed Node Groups, đảm bảo mọi node trong MNG sẽ có các labels và taints tương ứng được cấu hình tự động.</p>
<p>Bây giờ hãy thêm một taint vào Amazon EKS Managed Node Groups được thiết lập trước của chúng ta <code>graviton</code>. Taint này sẽ có <code>key=frontend</code>, <code>value=true</code> và <code>effect=NO_EXECUTE</code>. Điều này đảm bảo rằng bất kỳ pod nào đang chạy trên Amazon EKS Managed Node Groups đã bị taint của chúng tôi sẽ bị đuổi ra nếu chúng không có toleration khớp. Ngoài ra, không có pod mới nào sẽ được lên lịch trên Amazon EKS Managed Node Groups này mà không có toleration phù hợp.</p>
<p>Bắt đầu bằng cách thêm một <code>taint</code> vào Amazon EKS Managed Node Groups được thiết lập trước của chúng ta bằng lệnh <code>aws</code> cli sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ aws eks update-nodegroup-config <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --cluster-name $EKS_CLUSTER_NAME --nodegroup-name graviton <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --taints <span style="color:#e6db74">&#34;addOrUpdateTaints=[{key=frontend, value=true, effect=NO_EXECUTE}]&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;update&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;488a2b7d-9194-3032-974e-2f1056ef9a1b&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;InProgress&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;ConfigUpdate&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;params&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;TaintsToAdd&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;[{\&#34;effect\&#34;:\&#34;NO_EXECUTE\&#34;,\&#34;value\&#34;:\&#34;true\&#34;,\&#34;key\&#34;:\&#34;frontend\&#34;}]&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;createdAt&#34;</span>: <span style="color:#e6db74">&#34;2022-11-09T15:20:10.519000+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;errors&#34;</span>: <span style="color:#f92672">[]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Chạy lệnh sau để chờ Node Groups trở thành hoạt động.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ aws eks wait nodegroup-active --cluster-name $EKS_CLUSTER_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --nodegroup-name graviton
</span></span></code></pre></div><p>Thêm, loại bỏ hoặc thay thế taints có thể được thực hiện bằng cách sử dụng lệnh CLI <a href="https://docs.aws.amazon.com/cli/latest/reference/eks/update-nodegroup-config.html"><code>aws eks update-nodegroup-config</code></a> để cập nhật cấu hình của Amazon EKS Managed Node Groups. Điều này có thể được thực hiện bằng cách chuyển <code>addOrUpdateTaints</code> hoặc <code>removeTaints</code> và một danh sách các taints đến cờ <code>--taints</code> của lệnh.</p>
<p>Bạn cũng có thể cấu hình taints trên một Amazon EKS Managed Node Groups bằng cách sử dụng CLI <code>eksctl</code>. Xem <a href="https://eksctl.io/usage/nodegroup-taints/">tài liệu</a> để biết thêm thông tin.</p>
<p>Chúng ta đã sử dụng <code>effect=NO_EXECUTE</code> trong cấu hình taint của chúng ta. Hiện tại, các Amazon EKS Managed Node Groups hỗ trợ các giá trị sau cho taint <code>effect</code>:</p>
<ul>
<li><code>NO_SCHEDULE</code> - Tương ứng với hiệu ứng taint Kubernetes <code>NoSchedule</code>. Điều này cấu hình Amazon EKS Managed Node Groups với một taint đẩy lùi tất cả các pod không có toleration khớp. Tất cả các pod đang chạy không bị đuổi ra khỏi các node của Amazon EKS Managed Node Groups.</li>
<li><code>NO_EXECUTE</code> - Tương ứng với hiệu ứng taint Kubernetes <code>NoExecute</code>. Cho phép các node được cấu hình với taint này không chỉ đẩy lùi các pod mới được lên lịch mà còn đuổi ra bất kỳ pod nào đang chạy mà không có toleration khớp.</li>
<li><code>PREFER_NO_SCHEDULE</code> - Tương ứng với hiệu ứng taint Kubernetes <code>PreferNoSchedule</code>. Nếu có thể, EKS tránh lên lịch các Pod không chịu taint này vào node.</li>
</ul>
<p>Chúng ta có thể sử dụng lệnh sau để kiểm tra taint đã được cấu hình đúng cho Amazon EKS Managed Node Groups:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ aws eks describe-nodegroup --cluster-name $EKS_CLUSTER_NAME <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --nodegroup-name graviton <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  | jq .nodegroup.taints
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;frontend&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;true&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;effect&#34;</span>: <span style="color:#e6db74">&#34;NO_EXECUTE&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Cập nhật Amazon EKS Managed Node Groups và lan truyền các labels và taints thường mất vài phút. Nếu bạn không thấy bất kỳ taint nào được cấu hình hoặc nhận được giá trị <code>null</code>, hãy đợi một vài phút trước khi thử lại lệnh trên.</p>
<p>Xác minh bằng lệnh CLI <code>kubectl</code>, chúng ta cũng có thể thấy rằng taint đã được lan truyền đúng cho node tương ứng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl describe nodes <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> --selector eks.amazonaws.com/nodegroup<span style="color:#f92672">=</span>graviton | grep Taints
</span></span><span style="display:flex;"><span>Taints:             frontend<span style="color:#f92672">=</span>true:NoExecute
</span></span></code></pre></div>




<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/vi/4-graviton-arm-instances/" title="Graviton (ARM) instances"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vi/4-graviton-arm-instances/4.2-run-pods-on-graviton/" title="Chạy các pods trên Graviton" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1712388775"></script>
    <script src="/js/perfect-scrollbar.min.js?1712388775"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1712388775"></script>
    <script src="/js/jquery.sticky.js?1712388775"></script>
    <script src="/js/featherlight.min.js?1712388775"></script>
    <script src="/js/highlight.pack.js?1712388775"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1712388775"></script>
    <script src="/js/learn.js?1712388775"></script>
    <script src="/js/hugo-learn.js?1712388775"></script>

    <link href="/mermaid/mermaid.css?1712388775" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1712388775"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
