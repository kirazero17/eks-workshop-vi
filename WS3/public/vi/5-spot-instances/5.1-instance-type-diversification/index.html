<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.122.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Đa dạng hóa loại Instance :: Kubernetes - EKS Workshop</title>

    
    <link href="/css/nucleus.css?1712388775" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1712388775" rel="stylesheet">
    <link href="/css/hybrid.css?1712388775" rel="stylesheet">
    <link href="/css/featherlight.min.css?1712388775" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1712388775" rel="stylesheet">
    <link href="/css/auto-complete.css?1712388775" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1712388775" rel="stylesheet">
    <link href="/css/theme.css?1712388775" rel="stylesheet">
    <link href="/css/hugo-theme.css?1712388775" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1712388775" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1712388775"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/vi/5-spot-instances/5.1-instance-type-diversification/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1712388775"></script>
<script type="text/javascript" src="/js/auto-complete.js?1712388775"></script>
<script type="text/javascript">
    
        var baseurl = "\/vi";
    
</script>
<script type="text/javascript" src="/js/search.js?1712388775"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduce/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/">
          <b> 1. </b>Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.1-manual-scheduling/" title="Manual Scheduling" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.1-manual-scheduling/">
          <b> 1.1 </b>Manual Scheduling
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.2-labels-and-selectors/" title="Labels and Selectors" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.2-labels-and-selectors/">
          <b> 1.2 </b>Labels and Selectors
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.3-node-selectors/" title="Node Selectors" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.3-node-selectors/">
          <b>  1.3 </b>Node Selectors
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.4-taints-and-tolerations/" title="Taints and Tolerations" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.4-taints-and-tolerations/">
          <b>  1.4 </b>Taints and Tolerations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.5-node-affinity/" title="Node Affinity" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.5-node-affinity/">
          <b>  1.5 </b>Node Affinity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.6-resource-limits/" title="Giới Hạn Tài Nguyên" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.6-resource-limits/">
          <b>  1.6 </b>Giới Hạn Tài Nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.7-daemonsets/" title="DaemonSets" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.7-daemonsets/">
          <b>  1.7 </b>DaemonSets
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.8-static-pods/" title="Static Pods" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.8-static-pods/">
          <b>  1.8 </b>Static Pods
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/1-introduce/1.9-multiple-schedulers/" title="Multiple Schedulers" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/1.9-multiple-schedulers/">
          <b>  1.9 </b>Multiple Schedulers
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-prerequiste/" title="Các Bước Chuẩn Bị" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-prerequiste/">
          <b> 2. </b>Các Bước Chuẩn Bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/" title="Amazon EKS Managed Node Groups" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/">
          <b> 3. </b>Amazon EKS Managed Node Groups
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.1-add-nodes/" title="Thêm các node" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.1-add-nodes/">
          <b> 3.1 </b>Thêm các node
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.2-pod-affinity-and-anti-affinity/" title="Pod Affinity and Anti-Affinity" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.2-pod-affinity-and-anti-affinity/">
          <b> 3.2 </b>Pod Affinity and Anti-Affinity
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-managed-node-groups/3.3-upgrading-amis/" title="Nâng cấp AMI" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-managed-node-groups/3.3-upgrading-amis/">
          <b> 3.3 </b>Nâng cấp AMI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/" title="Graviton (ARM) instances" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-graviton-arm-instances/">
          <b> 4. </b>Graviton (ARM) instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/" title="Tạo Graviton Nodes" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-graviton-arm-instances/4.1-create-graviton-nodes/">
          <b> 4.1 </b>Tạo Graviton Nodes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-graviton-arm-instances/4.2-run-pods-on-graviton/" title="Chạy các pods trên Graviton" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-graviton-arm-instances/4.2-run-pods-on-graviton/">
          <b> 4.2 </b>Chạy các pods trên Graviton
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-spot-instances/" title="Spot instances" class="dd-item 
        parent
        
        
        ">
      <a href="/vi/5-spot-instances/">
          <b> 5. </b>Spot instances
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.1-instance-type-diversification/" title="Đa dạng hóa loại Instance" class="dd-item 
        
        active
        
        ">
      <a href="/vi/5-spot-instances/5.1-instance-type-diversification/">
          <b> 5.1 </b>Đa dạng hóa loại Instance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.2-create-spot-capacity/" title="Tạo dung lượng dạng Spot" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/5.2-create-spot-capacity/">
          <b> 5.2 </b>Tạo dung lượng dạng Spot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-spot-instances/5.3-running-a-workload-on-spot/" title="Chạy một workloads trên Spot" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-spot-instances/5.3-running-a-workload-on-spot/">
          <b> 5.3 </b>Chạy một workloads trên Spot
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-fargate/" title="Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/">
          <b> 6. </b>Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.1-enabling-fargate/" title="Bật Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.1-enabling-fargate/">
          <b> 6.1 </b>Bật Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.2-scheduling-on-fargate/" title="Scheduling on Fargate" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.2-scheduling-on-fargate/">
          <b> 6.2 </b>Scheduling on Fargate
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.3-resource-allocation/" title="Resource allocation" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.3-resource-allocation/">
          <b> 6.3 </b>Resource allocation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-fargate/6.4-scaling-the-workload/" title="Scaling the workload" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-fargate/6.4-scaling-the-workload/">
          <b> 6.4 </b>Scaling the workload
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/5-spot-instances/5.1-instance-type-diversification/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=11626245&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>26-02-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
            <i> <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/vi/'>Kubernetes trên AWS</a> > <a href='/vi/5-spot-instances/'>Spot instances</a> > Đa dạng hóa loại Instance
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Đa dạng hóa loại Instance
            </h1>
          

        



	<h4 id="đa-dạng-hóa-loại-instance">Đa dạng hóa loại Instance</h4>
<p><a href="https://aws.amazon.com/ec2/spot/">Amazon EC2 Spot Instances</a> cung cấp khả năng tính toán dư thừa có sẵn trong Đám mây AWS với mức giảm giá đáng kể so với giá On-Demand. EC2 có thể ngắt Spot Instances với thông báo trước hai phút khi EC2 cần lại khả năng tính toán. Bạn có thể sử dụng Spot Instances cho các ứng dụng có tính chịu lỗi và linh hoạt khác nhau. Một số ví dụ là phân tích dữ liệu, các khối công việc được container hóa, tính toán hiệu suất cao (HPC), máy chủ web không trạng thái, kết xuất, CI/CD, và các khối công việc thử nghiệm và phát triển khác.</p>
<p>Một trong những phương pháp tốt nhất để áp dụng thành công Spot Instances là thực hiện <strong>đa dạng hóa Spot Instance</strong> như một phần của cấu hình của bạn. Đa dạng hóa Spot Instance giúp tiếp nhận khả năng từ nhiều group Spot Instance khác nhau, cả cho việc mở rộng và thay thế Spot Instances có thể nhận thông báo chấm dứt Spot Instance. Một group Spot Instance là một tập hợp các EC2 instances không sử dụng với cùng một loại Instance, hệ điều hành và AZ (ví dụ: <code>m5.large</code> trên Red Hat Enterprise Linux ở <code>us-east-1a</code>).</p>
<h4 id="cluster-autoscaler-với-đa-dạng-hóa-spot-instance">Cluster Autoscaler với Đa dạng hóa Spot Instance</h4>
<p>Cluster Autoscaler là một công cụ tự động điều chỉnh kích thước của cluster Kubernetes khi có các pod không chạy trong cluster do tài nguyên không đủ (Mở rộng) hoặc có các nút trong cluster đã được sử dụng không đủ trong một khoảng thời gian (Thu nhỏ).</p>
<p>Khi sử dụng Spot Instances với <a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler">Cluster Autoscaler</a> có một số điều cần <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md">xem xét</a>. Một điều quan trọng cần xem xét là, mỗi Nhóm Tăng tự động nên được tạo từ các loại instance cung cấp khả năng gần như bằng nhau. Cluster Autoscaler sẽ cố gắng xác định các tài nguyên CPU, bộ nhớ và GPU được cung cấp bởi một Nhóm Tăng tự động dựa trên ghi đè đầu tiên được cung cấp trong Chính sách Các Loại Instances Kết hợp của một Nhóm Tăng tự động. Nếu có bất kỳ ghi đè nào được tìm thấy, chỉ loại instance đầu tiên được tìm thấy sẽ được sử dụng. Xem <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md#Using-Mixed-Instances-Policies-and-Spot-Instances">Sử dụng Chính Sách Các Loại Instances Kết hợp và Spot Instances</a> để biết chi tiết.</p>
<p>Khi áp dụng các phương pháp đa dạng hóa Spot vào EKS và các cluster K8s trong khi sử dụng Cluster Autoscaler để tự động mở rộng khả năng, chúng ta phải thực hiện đa dạng hóa theo cách tuân thủ các chế độ hoạt động được mong đợi của Cluster Autoscaler.</p>
<p>Chúng ta có thể đa dạng hóa các group Spot Instance bằng hai chiến lược:</p>
<ul>
<li>Bằng cách tạo ra nhiều node groups, mỗi group có kích thước khác nhau. Ví dụ, một node groups có kích thước 4 vCPU và 16GB RAM, và một node groups khác có 8 vCPU và 32GB RAM.</li>
<li>Bằng cách thực hiện đa dạng hóa instance trong các node groups, bằng cách chọn một sự kết hợp của các loại instance và các gia đình khác nhau từ các group Spot Instance khác nhau mà đáp ứng các tiêu chí cùng về vCPU và bộ nhớ.</li>
</ul>
<p>Trong bài thực hành này, chúng ta sẽ giả sử rằng các node groups của chúng ta nên được cung cấp với các loại instance có 2 vCPU và 4GiB bộ nhớ.</p>
<p>Chúng ta sẽ sử dụng <strong><a href="https://github.com/aws/amazon-ec2-instance-selector">amazon-ec2-instance-selector</a></strong> để giúp chọn các loại instance và gia đình phù hợp có đủ số lượng vCPU và bộ nhớ.</p>
<p>Có hơn 350 loại instance khác nhau có sẵn trên EC2 có thể làm cho quá trình chọn loại instance phù hợp khó khăn <code>amazon-ec2-instance-selector</code> giúp bạn chọn các loại instance tương thích cho ứng dụng của bạn chạy trên. Giao diện dòng lệnh có thể được truyền các tiêu chí tài nguyên như vcpus, bộ nhớ, hiệu suất mạng, và nhiều hơn nữa và sau đó trả về các loại instance phù hợp có sẵn.</p>
<p>Công cụ CLI đã được cài đặt sẵn trong IDE của bạn:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ec2-instance-selector --version
</span></span></code></pre></div><p>Bây giờ bạn đã cài đặt ec2-instance-selector, bạn có thể chạy <code>ec2-instance-selector --help</code> để hiểu cách bạn có thể sử dụng nó để chọn các loại instance phù hợp với yêu cầu công việc của bạn. Vì mục đích của bài thực hành này, chúng ta cần trước tiên lấy một group các loại instance đáp ứng mục tiêu của chúng tôi là 2 vCPU và 4 GB RAM.</p>
<p>Chạy lệnh sau để lấy danh sách các loại instance.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ec2-instance-selector --vcpus <span style="color:#ae81ff">2</span> --memory <span style="color:#ae81ff">4</span> --gpus <span style="color:#ae81ff">0</span> --current-generation <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -a x86_64 --deny-list <span style="color:#e6db74">&#39;t.*&#39;</span> --output table-wide
</span></span><span style="display:flex;"><span>Instance Type  VCPUs   Mem <span style="color:#f92672">(</span>GiB<span style="color:#f92672">)</span>  Hypervisor  Current Gen  Hibernation Support  CPU Arch  Network Performance
</span></span><span style="display:flex;"><span>-------------  -----   ---------  ----------  -----------  -------------------  --------  -------------------
</span></span><span style="display:flex;"><span>c5.large       <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         true                 x86_64    Up to <span style="color:#ae81ff">10</span> Gigabit
</span></span><span style="display:flex;"><span>c5a.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to <span style="color:#ae81ff">10</span> Gigabit
</span></span><span style="display:flex;"><span>c5ad.large     <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to <span style="color:#ae81ff">10</span> Gigabit
</span></span><span style="display:flex;"><span>c5d.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         true                 x86_64    Up to <span style="color:#ae81ff">10</span> Gigabit
</span></span><span style="display:flex;"><span>c6a.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to 12.5 Gigabit
</span></span><span style="display:flex;"><span>c6i.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         true                 x86_64    Up to 12.5 Gigabit
</span></span><span style="display:flex;"><span>c6id.large     <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         true                 x86_64    Up to 12.5 Gigabit
</span></span><span style="display:flex;"><span>c6in.large     <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to <span style="color:#ae81ff">25</span> Gigabit
</span></span><span style="display:flex;"><span>c7a.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to 12.5 Gigabit
</span></span><span style="display:flex;"><span>c7i.large      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">4</span>          nitro       true         false                x86_64    Up to 12.5 Gigabit
</span></span></code></pre></div><p>Chúng ta sẽ sử dụng các loại instance này khi chúng ta định nghĩa node groups của mình trong phần tiếp theo.</p>
<p>Bên trong, <code>ec2-instance-selector</code> đang gọi đến <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeInstanceTypes.html">DescribeInstanceTypes</a> cho khu vực cụ thể và lọc các loại instance dựa trên các tiêu chí được chọn trong dòng lệnh, trong trường hợp của chúng ta, chúng ta đã lọc các loại instance đáp ứng các tiêu chí sau:</p>
<ul>
<li>Các loại instance không có GPU</li>
<li>Kiến trúc x86_64 (không có các loại instance ARM như A1 hoặc các loại instance m6g chẳng hạn)</li>
<li>Các loại instance có 2 vCPU và 4 GB RAM</li>
<li>Các loại instance thế hệ hiện tại (từ thế hệ thứ 4 trở đi)</li>
<li>Các loại instance không đáp ứng biểu thức chính quy <code>t.*</code> để loại bỏ các loại instance burstable</li>
</ul>
<p>Khối công việc của bạn có thể có các ràng buộc khác mà bạn nên xem xét khi chọn loại instance. Ví dụ. Các loại instance <strong>t2</strong> và <strong>t3</strong> là <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances.html">loại burstable</a> và có thể không phù hợp cho các khối công việc có hạn chế về CPU yêu cầu độ chính xác của CPU. Các loại instance như m5<strong>a</strong> là <a href="https://aws.amazon.com/ec2/amd/">loại AMD Instances</a>, nếu khối công việc của bạn nhạy cảm với sự khác biệt số liệu (ví dụ: tính toán rủi ro tài chính, mô phỏng công nghiệp) việc kết hợp các loại instance này có thể không phù hợp.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/vi/5-spot-instances/" title="Spot instances"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vi/5-spot-instances/5.2-create-spot-capacity/" title="Tạo dung lượng dạng Spot" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1712388775"></script>
    <script src="/js/perfect-scrollbar.min.js?1712388775"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1712388775"></script>
    <script src="/js/jquery.sticky.js?1712388775"></script>
    <script src="/js/featherlight.min.js?1712388775"></script>
    <script src="/js/highlight.pack.js?1712388775"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1712388775"></script>
    <script src="/js/learn.js?1712388775"></script>
    <script src="/js/hugo-learn.js?1712388775"></script>

    <link href="/mermaid/mermaid.css?1712388775" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1712388775"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
